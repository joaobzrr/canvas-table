import { resolve, dirname } from "path";
import { fileURLToPath }  from "url";
import { writeFileSync } from "fs";

const __filename = fileURLToPath(import.meta.url);
const __dirname = dirname(__filename);

function randint(min, max) {
  const _min = Math.ceil(min);
  const _max = Math.floor(max);
  return Math.floor(Math.random() * (_max - _min + 1)) + _min;
}

function choice(options) {
  const index = randint(0, options.length)
  return options[index];
}

function randstr(charset, length) {
  const chars = [];
  for (let i = 0; i < length; i++) {
    chars.push(choice(charset));
  }
  const result = chars.join("");
  return result;
}

function generateTableData(params) {
  const { charset, numberOfRows, numberOfColumns } = params;

  const columnDefs = [];

  for (let columnIndex = 0; columnIndex < numberOfColumns; columnIndex++) {
    columnDefs.push({
      title: `Column ${columnIndex + 1}`,
      field: `column-${columnIndex + 1}`,
      width: randint(100, 200)
    });
  }

  const dataRows = [];

  for (let rowIndex = 0; rowIndex < numberOfRows; rowIndex++) {
    const row = Object.fromEntries(columnDefs.map(column => {
      return [column.field, randstr(charset, 16)];
    }));
    row.id = rowIndex;
    dataRows.push(row);
  }

  return {
    columnDefs,
    dataRows
  };
}

const charset = ['ğŸ˜€', 'ğŸ˜', 'ğŸ˜‚', 'ğŸ¤£', 'ğŸ˜ƒ', 'ğŸ˜„', 'ğŸ˜…', 'ğŸ˜†', 'ğŸ˜‡', 'ğŸ˜ˆ', 'ğŸ‘¿', 'ğŸ˜‰', 'ğŸ˜Š', 'ğŸ˜‹', 'ğŸ˜Œ', 'ğŸ˜', 'ğŸ˜', 'ğŸ¥°', 'ğŸ˜˜', 'ğŸ˜—', 'ğŸ˜™', 'ğŸ˜š', 'ğŸ™‚', 'ğŸ¤—', 'ğŸ¤©', 'ğŸ¤”', 'ğŸ¤¨', 'ğŸ˜', 'ğŸ˜‘', 'ğŸ˜¶', 'ğŸ™„', 'ğŸ˜', 'ğŸ˜£', 'ğŸ˜¥', 'ğŸ˜®', 'ğŸ¤', 'ğŸ˜¯', 'ğŸ˜ª', 'ğŸ˜«', 'ğŸ˜´', 'ğŸ˜Œ', 'ğŸ¥º', 'ğŸ˜›', 'ğŸ˜œ', 'ğŸ˜', 'ğŸ¤¤', 'ğŸ˜’', 'ğŸ˜“', 'ğŸ˜”', 'ğŸ˜•', 'ğŸ™ƒ', 'ğŸ¤‘', 'ğŸ˜²', 'ğŸ™', 'ğŸ˜–', 'ğŸ˜', 'ğŸ˜Ÿ', 'ğŸ˜¤', 'ğŸ˜¢', 'ğŸ˜­', 'ğŸ˜¦', 'ğŸ˜§', 'ğŸ˜¨', 'ğŸ˜©', 'ğŸ¤¯', 'ğŸ˜¬', 'ğŸ˜°', 'ğŸ˜±', 'ğŸ˜³', 'ğŸ¤ª', 'ğŸ˜µ', 'ğŸ˜¡', 'ğŸ˜ ', 'ğŸ¤¬', 'ğŸ˜·', 'ğŸ¤’', 'ğŸ¤•', 'ğŸ¥´', 'ğŸ˜‹', 'ğŸ˜·', 'ğŸ¤¢', 'ğŸ¤®', 'ğŸ¤§', 'ğŸ˜‡', 'ğŸ¤ ', 'ğŸ¤¡', 'ğŸ¥³', 'ğŸ¥´', 'ğŸ¥º', 'ğŸ§', 'ğŸ¤“', 'ğŸ˜', 'ğŸ¥¶', 'ğŸ¥µ', 'ğŸ¤–', 'ğŸ¤ ', 'ğŸ‘½', 'ğŸ‘¾', 'ğŸ¤¡', 'ğŸ’©', 'ğŸ™Š', 'ğŸ‘»', 'ğŸ’€', 'â˜ ï¸', 'ä¸€', 'ä¸', 'ä¸ƒ', 'ä¸‡', 'ä¸ˆ', 'ä¸‰', 'ä¸Š', 'ä¸‹', 'ä¸', 'ä¸', 'ä¸”', 'ä¸–', 'ä¸˜', 'ä¸™', 'ä¸¡', 'ä¸¦', 'ä¸­', 'ä¸¸', 'ä¸¹', 'ä¸»', 'ä¹…', 'ä¹‹', 'ä¹', 'ä¹—', 'ä¹™', 'ä¹', 'ä¹', 'ä¹±', 'ä¹³', 'ä¹¾', 'äº€', 'äºˆ', 'äº‰', 'äº‹', 'äºŒ', 'äº’', 'äº”', 'äº•', 'äºœ', 'äº¡', 'äº¤', 'äº¥', 'äº¦', 'äº¨', 'äº«', 'äº¬', 'äº­', 'äºº', 'ä»', 'ä»', 'ä»•', 'ä»–', 'ä»˜', 'ä»™', 'ä»£', 'ä»¤', 'ä»¥', 'ä»®', 'ä»°', 'ä»²', 'ä¼Š', 'ä¼', 'ä¼', 'ä¼', 'ä¼', 'ä¼‘', 'ä¼š', 'ä¼', 'ä¼¯', 'ä¼´', 'ä¼¸', 'ä¼º', 'ä¼¼', 'ä½†', 'ä½', 'ä½', 'ä½', 'ä½', 'ä½“', 'ä½•', 'ä½™', 'ä½œ', 'ä½³', 'ä½¿', 'ä¾', 'ä¾›', 'ä¾', 'ä¾¡', 'ä¾®', 'ä¾µ', 'ä¾¿', 'ä¿‚', 'ä¿ƒ', 'ä¿Š', 'ä¿—', 'ä¿', 'ä¿¡', 'ä¿®', 'ä¿³', 'ä¿µ', 'ä¿º', 'å€‰', 'å€‹', 'å€', 'å€’', 'å€™', 'å€Ÿ', 'å€£', 'å€¤', 'å€«', 'å€­', 'å‰', 'å', 'åœ', 'å¥', 'å´', 'åµ', 'å¶', 'å‚', 'å‚‘', 'å‚¬', 'å‚˜', 'å‚™', 'å‚£', 'å‚²', 'å‚·', 'å‚¾', 'åƒ', 'åƒ', 'åƒ•', 'åƒš', 'åƒ§', 'åƒ»', 'å„€', 'å„„', 'å„’', 'å„Ÿ', 'å„ª', 'å…ƒ', 'å…„', 'å……', 'å…†', 'å…ˆ', 'å…‰', 'å…‹', 'å…', 'å…', 'å…š', 'å…¥', 'å…¨', 'å…«', 'å…¬', 'å…­', 'å…±', 'å…µ', 'å…·', 'å…¸', 'å…¼', 'å†…', 'å†Š', 'å†', 'å†’', 'å†—', 'å†™', 'å† ', 'å†¥', 'å†¬', 'å†¶', 'å†·', 'å‡„', 'å‡†', 'å‡', 'å‡›', 'å‡¡', 'å‡¦', 'å‡¶', 'å‡¸', 'å‡¹', 'å‡º', 'å‡½', 'åˆ€', 'åˆƒ', 'åˆ†', 'åˆ‡', 'åˆˆ', 'åˆŠ', 'åˆ‘', 'åˆ—', 'åˆ', 'åˆ¤', 'åˆ¥', 'åˆ©', 'åˆ°', 'åˆ¶', 'åˆ·', 'åˆ¸', 'åˆ¹', 'åˆº', 'åˆ»', 'å‰‡', 'å‰Š', 'å‰', 'å‰–', 'å‰›', 'å‰£', 'å‰¤', 'å‰¥', 'å‰¯', 'å‰°', 'å‰²', 'å‰µ', 'åŠ‡', 'åŠ›', 'åŠ ', 'åŠ£', 'åŠ©', 'åŠª', 'åŠ±', 'åŠ´', 'åŠ¹', 'å‹ƒ', 'å‹‡', 'å‹‰', 'å‹’', 'å‹•', 'å‹˜', 'å‹™', 'å‹', 'å‹Ÿ', 'å‹¢', 'å‹¤', 'åŒ…', 'åŒ–', 'åŒ—', 'åŒ ', 'åŒ¹', 'åŒº', 'åŒ»', 'å', 'åƒ', 'å‡', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', 'Ä', 'Ä“', 'Ä«', 'Å', 'Å«', 'È³', 'Ä™', 'Ä—', 'Ä¯', 'Å³', 'Å¾', 'Ä', 'Å¡', 'Ä¼', 'Å†', 'Ä·', 'Ä…', 'Ä‡', 'Ä™', 'Å‚', 'Å„', 'Ã³', 'Å›', 'Åº', 'Å¼', 'Î±', 'Î²', 'Î³', 'Î´', 'Îµ', 'Î¶', 'Î·', 'Î¸', 'Î¹', 'Îº', 'Î»', 'Î¼', 'Î½', 'Î¾', 'Î¿', 'Ï€', 'Ï', 'Ïƒ', 'Ï„', 'Ï…', 'Ï†', 'Ï‡', 'Ïˆ', 'Ï‰', 'Ğ', 'Ğ‘', 'Ğ’', 'Ğ“', 'Ğ”', 'Ğ•', 'Ğ–', 'Ğ—', 'Ğ˜', 'Ğ™', 'Ğš', 'Ğ›', 'Ğœ', 'Ğ', 'Ğ', 'ĞŸ', 'Ğ ', 'Ğ¡', 'Ğ¢', 'Ğ£', 'Ğ¤', 'Ğ¥', 'Ğ¦', 'Ğ§', 'Ğ¨', 'Ğ©', 'Ğª', 'Ğ«', 'Ğ¬', 'Ğ­', 'Ğ®', 'Ğ¯', 'Ã¤', 'Ã¶', 'Ã¼', 'ÃŸ'];

const data = generateTableData({
  charset,
  numberOfRows: 100,
  numberOfColumns: 100
});

const path = resolve(__dirname, "../temp/generated.json");

try {
  writeFileSync(path, JSON.stringify(data))
} catch (err) {
  console.log(err);
}
